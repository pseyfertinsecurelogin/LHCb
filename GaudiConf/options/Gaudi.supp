##----------------------------------------------------------------------##
# Valgrind error suppression file for GAUDI_v18r7, gcc 3.2.3, valgrind 3.2.0

# Format of this file is:
# {
#     name_of_suppression
#     kind: one of Param Value1 Value2 Value4 Value8
#                   Free Addr1 Addr2 Addr4 Addr8
#                   Cond (previously known as Value0)
#     (if Param: name of system call param, if Free: name of free-ing fn)
#     caller0 name, or /name/of/so/file.so
#     caller1 name, or ditto
#     (optionally: caller2 name)
#     (optionally: caller3 name)
# }

# glibc 2.3 problems (from .supp file distributed with valgrind)
{
   realpath is inefficiently coded
   Memcheck:Overlap
   fun:_vgrZU_libcZdsoZa_memcpy
   fun:realpath@@GLIBC_2.3
}

# Root 5.12.00c problems
{
  Reflex/FunctionBuilder
  Memcheck:Addr1
  fun:_vgrZU_libcZdsoZa_strlen
  fun:_ZNSsC1EPKcRKSaIcE
  fun:_ZN4ROOT6Reflex30FunctionMemberTemplateInstanceC1EPKcRKNS0_4TypeEPFPvS7_RKSt6vectorIS7_SaIS7_EES7_ES7_S3_jRKNS0_5ScopeE
}

{
  Reflex/FunctionBuilder2
  Memcheck:Addr1
  fun:_vgrZU_libcZdsoZa_memcpy
  obj:/usr/lib/libstdc++.so.5.0.3
  fun:_ZNSsC1EPKcRKSaIcE
  fun:_ZN4ROOT6Reflex30FunctionMemberTemplateInstanceC1EPKcRKNS0_4TypeEPFPvS7_RKSt6vectorIS7_SaIS7_EES7_ES7_S3_jRKNS0_5ScopeE
}

{
  TCastorFile
  Memcheck:Cond
  fun:just_stage_mapper
  fun:getDefaultForGlobal
  fun:_ZN11TCastorFile17ParseAndSetGlobalEv
  fun:_ZN11TCastorFile17FindServerAndPathEv
}

{
  TRFIOFile
  Memcheck:Cond
  fun:just_stage_mapper
  fun:getDefaultForGlobal
  fun:rfio_HsmIf_open
  fun:rfio_open_ext
}

{
  TRFIOFile/1
  Memcheck:Param
  socketcall.send(msg)
  fun:send
  fun:rfio_filbuf
  fun:rfio_read_v2
  fun:rfio_read
}

{
  TRFIOFile/2
  Memcheck:Param
  socketcall.send(msg)
  fun:send
  fun:rfio_fstat
  fun:_ZN9TRFIOFile7SysStatEiPlPxS0_S0_
  fun:_ZNK5TFile7GetSizeEv
}

{
  TRIOFile/3
  Memcheck:Leak
  fun:_vgrZU_libcZdsoZa_malloc
  fun:rfio_parseln
  fun:rfio_parse
  fun:rfio_open_ext
}

{
  TRIOFile/4
  Memcheck:Leak
  fun:_vgrZU_libcZdsoZa_malloc
  fun:strdup
  fun:getDefaultForGlobal
  fun:rfio_HsmIf_open
}

{
  Rzip/longest_match
  Memcheck:Cond
  fun:longest_match
  fun:deflate_fast
  fun:deflate
  fun:R__zip
}

{
  Rzip/tr_flush_block
  Memcheck:Cond
  fun:_tr_flush_block
  fun:deflate_fast
  fun:deflate
  fun:R__zip
}

{
  Rzip/fill_window
  Memcheck:Cond
  fun:fill_window
  fun:deflate_fast
  fun:deflate
  fun:R__zip
}

{
  Rzip/deflate_fast
  Memcheck:Value4
  fun:deflate_fast
  fun:deflate
  fun:R__zip
  fun:_ZN7TBasket11WriteBufferEv
}

{
  Rzip/compress_block
  Memcheck:Value4
  fun:compress_block
  fun:_tr_flush_block
  fun:deflate_fast
  fun:deflate
}

{
  Runzip
  Memcheck:Leak
  fun:_vgrZU_libcZdsoZa_malloc
  fun:R__huft_build
  fun:R__Inflate_fixed
  fun:R__Inflate_block
}

{
  TFile
  Memcheck:Param
  write(buf)
  fun:__write_nocancel
  fun:_ZN5TFile11WriteBufferEPKci
  fun:_ZN4TKey9WriteFileEiP5TFile
  fun:_ZN7TBasket11WriteBufferEv
}

{
  TCastorFile
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_Z22G__G__RootAuth_142_1_0P8G__valuePKcP8G__parami
  fun:_ZN11G__CallFunc7ExecuteEPv
  fun:_ZN11G__CallFunc7ExecIntEPv
}

{
  TCastorFile/2
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN8TStorage11ObjectAllocEj
  fun:_ZN7TObjectnwEj
  fun:_ZNK4ROOT20TQObjectInitBehavior11CreateClassEPKcsRKSt9type_infoP16TVirtualIsAProxyPFvPvR16TMemberInspectorPcES2_S2_ii
}

{
  Cintex
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znaj
  fun:_ZNK5TROOT8GetClassEPKcb
  fun:_ZN4pool15RootClassLoader11i_loadClassEPKc
  fun:_ZN4pool15RootClassLoader8GetClassEPKcb
}

{
  Cintex/2
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znaj
  fun:_ZNK5TROOT8GetClassEPKcb
  fun:_ZN5TROOT13IgnoreIncludeEPKcS1_
  fun:IgnoreInclude
}

# Problems due to static instantiation of plugins - Root 5.12.00c
{
  Reflex dict
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN4ROOT6Reflex30FunctionMemberTemplateInstanceC1EPKcRKNS0_4TypeEPFPvS7_RKSt6vectorIS7_SaIS7_EES7_ES7_S3_jRKNS0_5ScopeE
  fun:_ZN4ROOT6Reflex15FunctionBuilderC1ERKNS0_4TypeEPKcPFPvS7_RKSt6vectorIS7_SaIS7_EES7_ES7_S6_*
}

{
  Reflex dict/2
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN4ROOT6Reflex9ScopeBaseC2EPKcNS0_4TYPEE
  fun:_ZN4ROOT6Reflex5ClassC2EPKcjRKSt9type_infojNS0_4TYPEE
  fun:_ZN4ROOT6Reflex21ClassTemplateInstanceC1EPKcjRKSt9type_infoj
}

{
  Reflex dict/3
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN4ROOT6Reflex16PropertyListImpl11AddPropertyERKSsRKNS0_3AnyE
  fun:_ZN4ROOT6Reflex12PropertyList11AddPropertyERKSsRKNS0_3AnyE
  fun:_ZN4ROOT6Reflex16ClassBuilderImpl11AddPropertyEPKcNS0_3AnyE
}

{
  Reflex dict/4
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN4ROOT6Reflex8TypeBaseC2EPKcjNS0_4TYPEERKSt9type_info
  fun:_ZN4ROOT6Reflex*_4TYPEE
}

{
  Reflex dict/5
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN4ROOT6Reflex10MemberBaseC2EPKcRKNS0_4TypeENS0_4TYPEEj
  fun:_ZN4ROOT6Reflex14FunctionMemberC1EPKcRKNS0_4TypeEPFPvS7_RKSt6vectorIS7_SaIS7_EES7_ES7_S3_jNS0_4TYPEE
  fun:_ZN4ROOT6Reflex16ClassBuilderImpl17AddFunctionMemberEPKcRKNS0_4TypeEPFPvS7_RKSt6vectorIS7_SaIS7_EES7_ES7_S3_j
}  

{
  Reflex dict/6
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZNK4ROOT6Reflex9ScopeBase17AddFunctionMemberEPKcRKNS0_4TypeEPFPvS7_RKSt6vectorIS7_SaIS7_EES7_ES7_S3_j
}

{
  Reflex dict/7
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN4ROOT6Reflex16ClassBuilderImpl7AddEnumEPKcS3_PKSt9type_info
  fun:_ZN4ROOT6Reflex12ClassBuilder7AddEnumEPKcS3_PKSt9type_info
}

{
  Reflex dict/8
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN4ROOT6Reflex16ClassBuilderImpl13AddDataMemberEPKcRKNS0_4TypeEjj
  fun:_ZN4ROOT6Reflex12ClassBuilder13AddDataMemberERKNS0_4TypeEPKcjj
}

{
  Reflex dict/9
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZNSt24__default_alloc_templateILb1ELi0EE8allocateEj
  fun:_ZNSs4_Rep9_S_createEjRKSaIcE
}

{
  Reflex dict/10
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZNSt24__default_alloc_templateILb1ELi0EE14_S_chunk_allocEjRi
  fun:_ZNSt24__default_alloc_templateILb1ELi0EE9_S_refillEj
  fun:_ZNSt24__default_alloc_templateILb1ELi0EE8allocateEj
}

{
  Reflex dict/11
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN4ROOT6Reflex16ClassBuilderImpl17AddFunctionMemberEPKcRKNS0_4TypeEPFPvS7_RKSt6vectorIS7_SaIS7_EES7_ES7_S3_j
  fun:_ZN4ROOT6Reflex12ClassBuilder17AddFunctionMemberERKNS0_4TypeEPKcPFPvS7_RKSt6vectorIS7_SaIS7_EES7_ES7_S6_j
}

{
  memfunc_para_setup
  Memcheck:Leak
  fun:_vgrZU_libcZdsoZa_malloc
  fun:G__memfunc_para_setup
  fun:G__parse_parameter_link
  fun:G__memfunc_setup
}

{
  memfunc_next
  Memcheck:Leak
  fun:_vgrZU_libcZdsoZa_malloc
  fun:G__memfunc_next
  fun:G__memfunc_setup
  fun:_Z18G__cpp_setup_func*v
}

{
  savestring
  Memcheck:Leak
  fun:_vgrZU_libcZdsoZa_malloc
  fun:G__savestring
  fun:G__memfunc_setup
  fun:_Z18G__cpp_setup_func3v
}

{
  TString
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znaj
  fun:_ZN10TStringRef6GetRepEii
  fun:_ZN7TStringC1EPKc
  fun:_ZN10TObjStringC1EPKc
}

{
  TString/2
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znaj
  fun:_ZN10TStringRef6GetRepEii
  fun:_ZN7TString7ReplaceEiiPKci
  fun:_ZN7TStringaSEPKc
}

{
  Seal plugin
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN8TStorage11ObjectAllocEj
  fun:_ZN7TObjectnwEj
  fun:_ZNK7TString8TokenizeERKS_
}

{
  Seal plugin/2
  Memcheck:Leak
  fun:_vgrZU_libcZdsoZa_malloc
  fun:G__store_dictposition
  fun:_ZN5TCint1*
  fun:_ZN12TApplicationC1EPKcPiPPcPvi
}

# Xerces 2.7.0 problems
{
  Xerces
  Memcheck:Cond
  fun:_ZN11xercesc_2_717XMLUTF8Transcoder13transcodeFromEPKhjPtjRjPh
  fun:_ZN11xercesc_2_79XMLReader14xcodeMoreCharsEPtPhj
  fun:_ZN11xercesc_2_79XMLReader17refreshCharBufferEv
}

# C run time library, gcc 3.2.3, seen since GaudiKernel v9r0
{
  from System::virtualMemory()
  Memcheck:Cond
  fun:_vgrZU_libcZdsoZa_rawmemchr
  fun:_IO_str_init_static_internal
  fun:vsscanf
  fun:sscanf
}

# POOL_2_4_6
{
  XmlFileCatalog
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN4pool18PoolXMLFileCatalog19StartXMLFileCatalogEv
  fun:_ZNK4pool14XMLFileCatalog5startEv
  fun:_ZN4pool6FCLeaf5startEv
}

# Castor 2.1.0.8
{
  Castor
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZNK6castor10CnvFactoryINS_2io*
  fun:_ZN6castor10BaseCnvSvc9converterEj
}

{
  Castor/1
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZNK6castor10SvcFactoryINS_8NoMsgSvcEE11instantiateESs
  fun:_ZN6castor8Services7serviceESsj
  fun:_ZN6castor10BaseObject6msgSvcESsm
}

# Gaudi v18r7
{
  GaudiPoolDb
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN4pool12DbSessionObjC1Ev
  fun:_ZN4pool9DbSession4openEPv
  fun:_ZN12PoolDbCnvSvc10initializeEv
}

{
  GaudiPoolDb/2
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znaj
  fun:_ZN13TStreamerInfo7CompileEv
}

{
  ApplicationMgr
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZN14ApplicationMgrC1EP10IInterface
  fun:_ZNK13ObjectFactoryI14ApplicationMgrE11instantiateEP10IInterface
  fun:_ZN5Gaudi14createInstanceERKSsS1_S1_
}

{
  ServiceManager
  Memcheck:Leak
  fun:_vgrZU_libstdcZpZpZa__Znwj
  fun:_ZNK10SvcFactoryI1*
  fun:_ZN14ServiceManager13createServiceERKSsS1_RP8IService
  fun:_ZN14ServiceManager10getServiceERKSsRP8IServiceb
}

# From UnpackMCVertex - LHCb v21r8
{
  UnpackMCVertex
  Memcheck:Free
  fun:_vgrZU_libstdcZpZpZa__ZdlPv
  fun:_ZN10DataObjectD0Ev
  fun:_ZN10DataObject7releaseEv
  fun:_ZN14DataSvcHelpers13RegistryEntryD0Ev
}
