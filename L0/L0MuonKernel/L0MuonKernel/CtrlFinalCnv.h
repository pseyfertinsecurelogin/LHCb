#ifndef L0MUONKERNEL_CTRLFINALCNV_H
#define L0MUONKERNEL_CTRLFINALCNV_H 

/** @class CtrlFinalCnv CtrlFinalCnv.h  L0MuonKernel/CtrlFinalCnv.h
 
  Class for constructing the raw data generated by the TELL1 linked to the processing boards in transparent mode. 

  @author
  @date

*/
#include "L0MuonKernel/CandRegisterHandler.h"
#include "L0MuonKernel/MuonCandidate.h"
#include <string>
#include <map>
#include <vector>

namespace L0Muon {
  
  class CtrlFinalCnv  {

  public:

    /// Default Constructor
    CtrlFinalCnv();

    /// Default Constructor
    CtrlFinalCnv(int side);

    /// Destructor
    ~CtrlFinalCnv();
    
    void release();

    std::vector<PMuonCandidate> muonCandidates();

    void decodeBank(std::vector<unsigned int> raw, int version);
    std::vector<unsigned int> rawBank(int version, int ievt);

    void decodeBankV1(std::vector<unsigned int> raw);
    std::vector<unsigned int> rawBankV1( int ievt);

    void decodeBankDC06(std::vector<unsigned int> raw);
    std::vector<unsigned int> rawBankDC06();

    void dump(std::string tab=""){
      for (int i= 0; i<2; ++i) {
        m_candRegHandler[i].dump(-1,tab);
      }
    }

  private:
    
    int m_side;
    // Input candidate registers
    CandRegisterHandler m_candRegHandler[2];

  };
}; // namespace L0Muon
 
#endif    // L0MUONKERNEL_CTRLFINALCNV_H
