package DAQEvent
version v7r3

use GaudiKernel v*
branches cmt doc Event src tests xml


# Produce Header-Files & dictionary from XML description
#============================================================================
document obj2doth DAQEventObj2Doth ../xml/*.xml
apply_pattern install_more_includes more=Event

document obj2dict DAQEventObj2Dict ../xml/*.xml

# ==================== Produce LCG dictionary ===============================
apply_pattern     reflex_dictionary                            \
                  dictionary=DAQEvent                               \
                  headerfiles=$(DAQEVENTROOT)/Event/RawEvent.h     \
                  selectionfile=$(DAQEVENTROOT)/xml/lcgdict/lcg_selection.xml
macro_append DAQEvent_reflex_options ' --comments '

# Hack for cmt v1r19 bug to link dictionary on windows
macro DAQEventDict_use_linkopts $(use_linkopts)

# ==================== linker library =======================================
library DAQEventLib     *.cpp

# ==================== component libraries ==================================
library DAQEvent        component/*.cpp -import=GaudiAlg

# ==================== Standard patterns (order is important!) ==============
apply_pattern component_library library=DAQEvent
apply_pattern linker_library    library=DAQEventLib

private
use GaudiAlg     v*      -no_auto_imports
use GaudiObjDesc v*      -no_auto_imports

# we need LHCbKernel just for an include file
use LHCbKernel   v* Kernel
macro_remove DAQEvent_use_linkopts '$(LHCbKernel_linkopts)'
macro_remove DAQEventLib_use_linkopts '$(LHCbKernel_linkopts)'
macro_remove DAQEventDict_use_linkopts '$(LHCbKernel_linkopts)'

#========= Uncomment 5 lines to build and run the Test application ==========
#use GaudiConf   v*      -no_auto_imports
#use GaudiSvc    v*      -no_auto_imports
#macro_append  TestRawEventlinkopts '$(DAQEvent_linkopts)'
#application   TestRawEvent $(GAUDICONFROOT)/src/GaudiMain.cpp ../tests/*.cpp
#apply_pattern application_path
