<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>conddbui.CondDB</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css"></link>
</head>
<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">

<!-- =========== START OF NAVBAR =========== -->
<table class="navbar" border="0" width="100%" cellpadding="0" bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="center">
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="conddbui-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="trees.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="indices.html">Index</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <font size="-1"><b class="breadcrumbs">
        <a href="conddbui-module.html">Module&nbsp;conddbui</a> ::
        Class&nbsp;CondDB
      </b></font></br>
    </td>
    <td><table cellpadding="0" cellspacing="0">
      <tr><td align="right"><font size="-2">[show&nbsp;private&nbsp;|&nbsp;<a href="../public/conddbui.CondDB-class.html">hide&nbsp;private</a>]</font></td></tr>
      <tr><td align="right"><font size="-2">[<a href="frames.html"target="_top">frames</a>&nbsp;|&nbsp;<a href="conddbui.CondDB-class.html" target="_top">no&nbsp;frames</a>]</font></td></tr>
    </table></td>
</tr></table>

<!-- =========== START OF CLASS DESCRIPTION =========== -->
<h2 class="class">Class CondDB</h2>

<hr/>

Object allowing to manipulate a COOL database object in an LHCb way. 
This object contains a functions to open or create a database. It can 
then be manipulated either directly through the attribute 'db', or via a 
set of functions simplifying some operations, like creation and deletion 
of nodes, storage and retrieval of XML strings, etc.
<hr/>


<!-- =========== START OF METHOD SUMMARY =========== -->
<table class="summary" border="1" cellpadding="3" cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="summary">
  <th colspan="2">Method Summary</th></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#__init__" class="summary-sig-name"><code>__init__</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>connectionString</span>,
          <span class=summary-sig-arg>create_new_db</span>,
          <span class=summary-sig-arg>defaultTag</span>,
          <span class=summary-sig-arg>readOnly</span>)</span></code>
<br />
Establishes the connection to the COOL database and store the object.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#closeDatabase" class="summary-sig-name"><code>closeDatabase</code></a>(<span class=summary-sig-arg>self</span>)</span></code>
<br />
Close the connection to the opened database...</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#createDatabase" class="summary-sig-name"><code>createDatabase</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>connectionString</span>)</span></code>
<br />
Create a new database and connect to it.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#createNode" class="summary-sig-name"><code>createNode</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>description</span>,
          <span class=summary-sig-arg>storageType</span>,
          <span class=summary-sig-arg>versionMode</span>,
          <span class=summary-sig-arg>storageKeys</span>)</span></code>
<br />
Creates a new node (folder or folderset) in the database.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#createTagRelation" class="summary-sig-name"><code>createTagRelation</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>parentTag</span>,
          <span class=summary-sig-arg>tag</span>)</span></code>
<br />
Create a relation between the tag of the given node and a tag
of its parent node.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#deleteNode" class="summary-sig-name"><code>deleteNode</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>delete_subnodes</span>)</span></code>
<br />
Delete a node from the database permanently.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#deleteTag" class="summary-sig-name"><code>deleteTag</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>tagName</span>,
          <span class=summary-sig-arg>delete_relations</span>)</span></code>
<br />
Delete a tag from the database, and its relations if asked for.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#deleteTagRelation" class="summary-sig-name"><code>deleteTagRelation</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>parentTag</span>)</span></code>
<br />
Delete a relation between the tag of the given node and a tag
of its parent node.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#dropDatabase" class="summary-sig-name"><code>dropDatabase</code></a>(<span class=summary-sig-arg>cls</span>,
          <span class=summary-sig-arg>connectionString</span>)</span></code>
<br />
drop the database identified by the connection string.    <i>(Class method)</i>
</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#generateUniqueTagName" class="summary-sig-name"><code>generateUniqueTagName</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>baseName</span>,
          <span class=summary-sig-arg>reservedNames</span>)</span></code>
<br />
Generate a random tag name based on a given one.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#getAllChildNodes" class="summary-sig-name"><code>getAllChildNodes</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>)</span></code>
<br />
Return all the nodes of the tree lying under &quot;path&quot;
inputs:
    path: string; path of the parent node.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#getAllNodes" class="summary-sig-name"><code>getAllNodes</code></a>(<span class=summary-sig-arg>self</span>)</span></code>
<br />
Convenience function: returns all the nodes of the database.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#getChildNodes" class="summary-sig-name"><code>getChildNodes</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>)</span></code>
<br />
Return a list of the children of the given node.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#getFolderStorageKeys" class="summary-sig-name"><code>getFolderStorageKeys</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>)</span></code>
<br />
Retrieve the keys of the Record Specification for the given folder.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#getPayload" class="summary-sig-name"><code>getPayload</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>when</span>,
          <span class=summary-sig-arg>channelID</span>,
          <span class=summary-sig-arg>tag</span>)</span></code>
<br />
Retrieve the payload of the condition object valid at a given time.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#getPayloadList" class="summary-sig-name"><code>getPayloadList</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>fromTime</span>,
          <span class=summary-sig-arg>toTime</span>,
          <span class=summary-sig-arg>channelID</span>,
          <span class=summary-sig-arg>tag</span>)</span></code>
<br />
Retrieve the payload of the condition objects valid during a given time interval.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#getTagList" class="summary-sig-name"><code>getTagList</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>)</span></code>
<br />
Return all the tag objects defined for the given node.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#getXMLString" class="summary-sig-name"><code>getXMLString</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>when</span>,
          <span class=summary-sig-arg>channelID</span>,
          <span class=summary-sig-arg>tag</span>,
          <span class=summary-sig-arg>payloadKey</span>)</span></code>
<br />
Retrieve the XML string of the condition object valid at a given time.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#getXMLStringList" class="summary-sig-name"><code>getXMLStringList</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>fromTime</span>,
          <span class=summary-sig-arg>toTime</span>,
          <span class=summary-sig-arg>channelID</span>,
          <span class=summary-sig-arg>tag</span>,
          <span class=summary-sig-arg>payloadKey</span>)</span></code>
<br />
Retrieve the payload of the condition objects valid during a given time interval.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#isSingleVersionFolder" class="summary-sig-name"><code>isSingleVersionFolder</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>)</span></code>
<br />
Check if path corresponds to a single version folder
inputs:
    path: string; path to the node to check
outputs:
    boolean; True if the node is a single version folder, False in all other cases
   (i.e.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#isTagReady" class="summary-sig-name"><code>isTagReady</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>tagName</span>,
          <span class=summary-sig-arg>path</span>)</span></code>
<br />
Check if the given tag name is usable at the level of the specified path.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#openDatabase" class="summary-sig-name"><code>openDatabase</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>connectionString</span>,
          <span class=summary-sig-arg>create_new_db</span>,
          <span class=summary-sig-arg>readOnly</span>)</span></code>
<br />
Closes the current database and connects to a new one.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#payloadToMd5" class="summary-sig-name"><code>payloadToMd5</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>tag</span>,
          <span class=summary-sig-arg>initialMd5Sum</span>)</span></code>
<br />
Computes the md5 sum for the payload stored under the given node.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#recursiveTag" class="summary-sig-name"><code>recursiveTag</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>tagName</span>,
          <span class=summary-sig-arg>description</span>,
          <span class=summary-sig-arg>reserved</span>)</span></code>
<br />
Tag the given node and recursively tag the child nodes and their HEAD revisions
with randomly generated tags.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#setDefaultTag" class="summary-sig-name"><code>setDefaultTag</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>tagName</span>)</span></code>
<br />
Set the value of the default tag.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#storeXMLString" class="summary-sig-name"><code>storeXMLString</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>data</span>,
          <span class=summary-sig-arg>since</span>,
          <span class=summary-sig-arg>until</span>,
          <span class=summary-sig-arg>channelID</span>)</span></code>
<br />
Adds a new condition object to the database.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#storeXMLStringList" class="summary-sig-name"><code>storeXMLStringList</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>XMLList</span>)</span></code>
<br />
Allows to store a list of XML string into a given folder.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#tagLeafNode" class="summary-sig-name"><code>tagLeafNode</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>tagName</span>,
          <span class=summary-sig-arg>description</span>)</span></code>
<br />
Apply a new tag to the head of the given folder.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="conddbui.CondDB-class.html#tagWithAncestorTag" class="summary-sig-name"><code>tagWithAncestorTag</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>path</span>,
          <span class=summary-sig-arg>ancestorTag</span>,
          <span class=summary-sig-arg>description</span>)</span></code>
<br />
Recursively tag (with automatically generated tag names) the given node and
associate the tags with the ancestor tag given.</td></tr>
</table><br />


<!-- =========== START OF INSTANCE METHOD DETAILS =========== -->
<table class="details" border="1" cellpadding="3" cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="details">
  <th colspan="2">Instance Method Details</th></tr>
</table>

<a name="__init__"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">__init__</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>connectionString</span>=<span class=sig-default>''</span>,
          <span class=sig-arg>create_new_db</span>=<span class=sig-default>False</span>,
          <span class=sig-arg>defaultTag</span>=<span class=sig-default>'HEAD'</span>,
          <span class=sig-arg>readOnly</span>=<span class=sig-default>True</span>)</span>
    <br /><i>(Constructor)</i>
  </h3>
<pre class="literalblock">
Establishes the connection to the COOL database and store the object.
inputs:
    connectionString: string; standard COOL connection string. An empty string
                      does not initialise the database handle.
                      -&gt; Default = ''
    create_new_db:    boolean; tells the constructor what to do if the connectionString
                      doesn't open an existing database.
                      -&gt; Default = False
    defaultTag:       string; tag which will be used by default if no other is precised.
                      -&gt; Default = 'HEAD'
    readOnly:         boolean; open the conddb in read only mode if True, or read/write
                      mode if False.
                      -&gt; Default = True (or False if the database is created)
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="closeDatabase"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">closeDatabase</span>(<span class=sig-arg>self</span>)</span>
  </h3>
<pre class="literalblock">
Close the connection to the opened database
inputs:
    none
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="createDatabase"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">createDatabase</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>connectionString</span>)</span>
  </h3>
<pre class="literalblock">
Create a new database and connect to it.
inputs:
    connectionString: string; standard COOL connection string.
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="createNode"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">createNode</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>description</span>=<span class=sig-default>''</span>,
          <span class=sig-arg>storageType</span>=<span class=sig-default>'XML'</span>,
          <span class=sig-arg>versionMode</span>=<span class=sig-default>'MULTI'</span>,
          <span class=sig-arg>storageKeys</span>=<span class=sig-default>['data']</span>)</span>
  </h3>
<pre class="literalblock">
Creates a new node (folder or folderset) in the database.
inputs:
    path:        string; full path of the new node. Parents will be created if necessary.
    description: string; short description of the node.
                 -&gt; Default = ''
    storageType: string; data type to be stored in this node, implying the type of node
                 to create. If the node is a folder, it will contain 'XML'. If it is a
                 folderset, it will contain 'NODE'.
                 -&gt; Default = 'XML'
    versionMode: string; applies to folders only: is it multi version ('MULTI') or single
                 version ('SINGLE') ?
                 -&gt; Default = 'MULTI'
    storageKeys: list of strings; the keys of the attribute list that will be stored in the folder.
                 -&gt; Default = ['data']
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="createTagRelation"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">createTagRelation</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>parentTag</span>,
          <span class=sig-arg>tag</span>)</span>
  </h3>
<pre class="literalblock">
Create a relation between the tag of the given node and a tag
of its parent node.
inputs:
    path:      string; path of the node
    parentTag: string; a tag associated to the parent node.
    tag:       string; the tag which we want to relate to the parent tag.
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="deleteNode"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">deleteNode</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>delete_subnodes</span>=<span class=sig-default>False</span>)</span>
  </h3>
<pre class="literalblock">
Delete a node from the database permanently.
inputs:
    path:            string; node's path in the database
    delete_subnodes: boolean; only useful for fodlersets. If True, all the subnodes
                     will be destroyed as well. If False, a node can be deleted only
                     if it has no children.
                     -&gt; Default = False

outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="deleteTag"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">deleteTag</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>tagName</span>,
          <span class=sig-arg>delete_relations</span>=<span class=sig-default>True</span>)</span>
  </h3>
<pre class="literalblock">
Delete a tag from the database, and its relations if asked for.
inputs:
    path:             string; path to the node
    tagName:          string; name of the tag to delete
    delete_relations: boolean; this has a meaning only for folders. If True,
                      delete also the relations with the parent tag.
                      -&gt; Default = True
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="deleteTagRelation"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">deleteTagRelation</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>parentTag</span>)</span>
  </h3>
<pre class="literalblock">
Delete a relation between the tag of the given node and a tag
of its parent node.
inputs:
    path:      string; path of the node
    parentTag: string; the tag we no longer want to be related to.
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="generateUniqueTagName"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">generateUniqueTagName</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>baseName</span>,
          <span class=sig-arg>reservedNames</span>=<span class=sig-default>[]</span>)</span>
  </h3>
<pre class="literalblock">
Generate a random tag name based on a given one.
inputs:
    baseName:       string; idealy, this is the &quot;parent tag&quot; name. If this name
                    is an automatically generated one (i.e. starting with '_auto_'
                    and finishing with '-' and 6 alphanumeric characters), the
                    function will automatically strip the name from its random
                    parts.
    reservedNames:  list of strings; list of name that can't be chosen.
                    -&gt; Default = []
outputs:
    string; the generated tag name. Its format is:
    '_auto_' + baseName + '-' + 6 random alphanumeric characters.
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="getAllChildNodes"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">getAllChildNodes</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>)</span>
  </h3>
<pre class="literalblock">
Return all the nodes of the tree lying under &quot;path&quot;
inputs:
    path: string; path of the parent node. Must be a folderset.
outpus:
    list of strings; the paths of all the elements of the tree under the
    given node.
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="getAllNodes"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">getAllNodes</span>(<span class=sig-arg>self</span>)</span>
  </h3>
<pre class="literalblock">
Convenience function: returns all the nodes of the database.
inputs:
    none
outputs:
    list of strings; the paths of all the nodes of the database
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="getChildNodes"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">getChildNodes</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>)</span>
  </h3>
<pre class="literalblock">
Return a list of the children of the given node.
inputs:
    path: string; path of the parent node. Must be a folderset.
outputs:
    list of strings; the paths of the child nodes.
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="getFolderStorageKeys"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">getFolderStorageKeys</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>)</span>
  </h3>
<pre class="literalblock">
Retrieve the keys of the Record Specification for the given folder.
inputs:
    path: string; path to the folder.
outputs:
    list of strings; the list of storage keys.
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="getPayload"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">getPayload</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>when</span>,
          <span class=sig-arg>channelID</span>=<span class=sig-default>0</span>,
          <span class=sig-arg>tag</span>=<span class=sig-default>''</span>)</span>
  </h3>
<pre class="literalblock">
Retrieve the payload of the condition object valid at a given time.
inputs:
    path:      string; path to the condition data in the database.
    when:      integer; time stamp (most likely an event time) at which the
               value of the condition is requested.
    channelID: integer; ID of the channel in which the condition data are
               stored.
               -&gt; Default = 0
    tag:       string; name of the version. If empty, defaultTag is used.
               -&gt; Default = ''
outputs:
    dictionary; the contents of the attribute list
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="getPayloadList"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">getPayloadList</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>fromTime</span>,
          <span class=sig-arg>toTime</span>,
          <span class=sig-arg>channelID</span>=<span class=sig-default>0</span>,
          <span class=sig-arg>tag</span>=<span class=sig-default>''</span>)</span>
  </h3>
<pre class="literalblock">
Retrieve the payload of the condition objects valid during a given time interval.
inputs:
    path:       string; path to the condition data in the database.
    fromTime:   integer; lower bound of the studied time interval.
    toTime:     integer; upper bound of the studied time interval. Note that an object
                with start of validity equal to this upper bound value will be returned
                as well.
    channelIDs: integer; IDs of the channel in which the condition data are
                stored. If None is given instead, all channels will be browsed.
                -&gt; Default = 0
    tag:        string; name of the version. If empty, defaultTag is used.
                -&gt; Default = ''
outputs:
    list of [dictionary, integer, integer, integer, integer]; the dictionary is the payload.
    The first two integers are the since and until values of the interval of validity. The
    third integer is the channel ID, and the last integer is the insertion time.
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="getTagList"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">getTagList</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>)</span>
  </h3>
<pre class="literalblock">
Return all the tag objects defined for the given node.
inputs:
    path: string; path to the leaf node
outputs:
    tagList: list of Tag; the list of Tag objects defined for this node.
             They contains links to their parent Tag objects.
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="getXMLString"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">getXMLString</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>when</span>,
          <span class=sig-arg>channelID</span>=<span class=sig-default>0</span>,
          <span class=sig-arg>tag</span>=<span class=sig-default>''</span>,
          <span class=sig-arg>payloadKey</span>=<span class=sig-default>'data'</span>)</span>
  </h3>
<pre class="literalblock">
Retrieve the XML string of the condition object valid at a given time.
inputs:
    path:      string; path to the condition data in the database.
    when:      integer; time stamp (most likely an event time) at which the
               value of the condition is requested.
    channelID: integer; ID of the channel in which the condition data are
               stored.
               -&gt; Default = 0
    tag:       string; name of the version. If empty, defaultTag is used.
               -&gt; Default = ''
    payloadKey: string; key of the Record element we want to retrieve.
                -&gt; Default = 'data'
outputs:
    string; the contents of the condition data.
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="getXMLStringList"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">getXMLStringList</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>fromTime</span>,
          <span class=sig-arg>toTime</span>,
          <span class=sig-arg>channelID</span>=<span class=sig-default>0</span>,
          <span class=sig-arg>tag</span>=<span class=sig-default>''</span>,
          <span class=sig-arg>payloadKey</span>=<span class=sig-default>'data'</span>)</span>
  </h3>
<pre class="literalblock">
Retrieve the payload of the condition objects valid during a given time interval.
inputs:
    path:       string; path to the condition data in the database.
    fromTime:   integer; lower bound of the studied time interval.
    toTime:     integer; upper bound of the studied time interval. Note that an object
                with start of validity equal to this upper bound value will be returned
                as well.
    channelIDs: integer; IDs of the channel in which the condition data are
                stored. If None is given instead, all channels will be browsed.
                -&gt; Default = 0
    tag:        string; name of the version. If empty, defaultTag is used.
                -&gt; Default = ''
    payloadKey: string; key of the record element we want to retrieve.
                -&gt; Default = 'data'
outputs:
    list of [string, integer, integer, integer, integer]; the string is the payload.
    The first two integers are the since and until values of the interval of validity.
    The third integer is the channel ID, and the last integer is the insertion time.
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="isSingleVersionFolder"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">isSingleVersionFolder</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>)</span>
  </h3>
<pre class="literalblock">
Check if path corresponds to a single version folder
inputs:
    path: string; path to the node to check
outputs:
    boolean; True if the node is a single version folder, False in all other cases
   (i.e. if the node is a multi version folder OR if it is a folderset or does not
   exist).
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="isTagReady"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">isTagReady</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>tagName</span>,
          <span class=sig-arg>path</span>=<span class=sig-default>'/'</span>)</span>
  </h3>
<pre class="literalblock">
Check if the given tag name is usable at the level of the specified path.
inputs:
    tagName:          string; name of the tag to delete
    path:             string; path to the node
                      -&gt; Default = '/'
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="openDatabase"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">openDatabase</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>connectionString</span>,
          <span class=sig-arg>create_new_db</span>=<span class=sig-default>False</span>,
          <span class=sig-arg>readOnly</span>=<span class=sig-default>True</span>)</span>
  </h3>
<pre class="literalblock">
Closes the current database and connects to a new one. Creates it if asked to.
inputs:
    connectionString: string; standard COOL connection string.
    create_new_db:    boolean; if True, creates a new database on failure to
                      connect.
                      -&gt; Default = False
    readOnly:         boolean; open the conddb in read only mode if True, or read/write
                      mode if False.
                      -&gt; Default = True
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="payloadToMd5"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">payloadToMd5</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>=<span class=sig-default>'/'</span>,
          <span class=sig-arg>tag</span>=<span class=sig-default>''</span>,
          <span class=sig-arg>initialMd5Sum</span>=<span class=sig-default>None</span>)</span>
  </h3>
<pre class="literalblock">
Computes the md5 sum for the payload stored under the given node.
inputs:
    path:   string; path to the top of the database subtree to check.
            -&gt; Default = '/'
    tag:    string; version of the data to check. If set to '', defaultTag
            is used. If set to 'ALL', will check all the tags associated
            to this node (NOT YET IMPLEMENTED !!)
            -&gt; Default = ''
    md5Sum: md5 object; starting point for the check. If none is given, a
            new one is created.
            -&gt; Default = None
outputs:
    md5 object; result from the md5 check sum.
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="recursiveTag"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">recursiveTag</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>tagName</span>,
          <span class=sig-arg>description</span>=<span class=sig-default>''</span>,
          <span class=sig-arg>reserved</span>=<span class=sig-default>None</span>)</span>
  </h3>
<pre class="literalblock">
Tag the given node and recursively tag the child nodes and their HEAD revisions
with randomly generated tags.
inputs:
    path:         string; full path to the node
    tagName:      string; name of the tag to apply. It must be unique in the database.
    description:  string; details about the tagging operation.
                  -&gt; Default = ''
    reserved:     list of strings; list of reserved tags.
                  -&gt; Default = None
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="setDefaultTag"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">setDefaultTag</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>tagName</span>)</span>
  </h3>
<pre class="literalblock">
Set the value of the default tag.
inputs:
    tagName: string; the name of the default tag.
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="storeXMLString"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">storeXMLString</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>data</span>,
          <span class=sig-arg>since</span>,
          <span class=sig-arg>until</span>,
          <span class=sig-arg>channelID</span>=<span class=sig-default>0</span>)</span>
  </h3>
<pre class="literalblock">
Adds a new condition object to the database.
inputs:
    path:      string; path of the folder where the condition will be stored.
    data:      dictionary; a dictionary version of the attribute list to store in the database.
    since:     integer; lower bound of the interval of validity.
    until:     integer; upper bound of the interval of validity. It is excluded from
               the interval.
    channelID: integer; ID of the channel where to store the condition.
               -&gt; Default: 0

outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="storeXMLStringList"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">storeXMLStringList</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>XMLList</span>)</span>
  </h3>
<pre class="literalblock">
Allows to store a list of XML string into a given folder.
inputs:
    path:    string; the path to the folder
    XMLList: list of dictionary of 'payload': dictionary: a dictionary version of the attribute
                                                          list to store in the database.
                                   'since': integer:      the lower bound of the IOV.
                                   'until': integer:      the upper bound of the IOV.
                                   'channel': integer:    the channel ID.
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="tagLeafNode"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">tagLeafNode</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>tagName</span>,
          <span class=sig-arg>description</span>=<span class=sig-default>''</span>)</span>
  </h3>
<pre class="literalblock">
Apply a new tag to the head of the given folder.
inputs:
    path:        string; full path to the folder
    tagName:     string; name of the tag to apply. It must be unique in the database.
    description: string; details about the tagging operation.
                 -&gt; Default = ''
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="tagWithAncestorTag"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">tagWithAncestorTag</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>path</span>,
          <span class=sig-arg>ancestorTag</span>,
          <span class=sig-arg>description</span>=<span class=sig-default>''</span>)</span>
  </h3>
<pre class="literalblock">
Recursively tag (with automatically generated tag names) the given node and
associate the tags with the ancestor tag given.
inputs:
    path:        string; path of the node to tag
    ancestorTag: string; tag to associate the node with. It must be an existing
                 tag and a relation must exist with the parent of the given node.
                 Otherwise, an exception is raised.
    description: string; description to associate with the tagged elements. If empty,
                 the description of the closest ancestor tag will be used.
                 -&gt; Default = ''
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>
<br />


<!-- =========== START OF CLASS METHOD DETAILS =========== -->
<table class="details" border="1" cellpadding="3" cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="details">
  <th colspan="2">Class Method Details</th></tr>
</table>

<a name="dropDatabase"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">dropDatabase</span>(<span class=sig-arg>cls</span>,
          <span class=sig-arg>connectionString</span>)</span>
  </h3>
<pre class="literalblock">
drop the database identified by the connection string.
inputs:
    connectionString: string; standard COOL connection string.
outputs:
    none
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>
<br />


<!-- =========== START OF NAVBAR =========== -->
<table class="navbar" border="0" width="100%" cellpadding="0" bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="center">
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="conddbui-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="trees.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="indices.html">Index</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar" width="100%"></th>
  </tr>
</table>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
    <td align="left"><font size="-2">Generated by Epydoc 2.1 on Tue Mar  6 18:29:23 2007</font></td>
    <td align="right"><a href="http://epydoc.sourceforge.net"
                      ><font size="-2">http://epydoc.sf.net</font></a></td>
  </tr>
</table>
</body>
</html>
