<?xml version="1.0" ?><!DOCTYPE extension  PUBLIC '-//QM/2.3/Extension//EN'  'http://www.codesourcery.com/qm/dtds/2.3/-//qm/2.3/extension/
/en.dtd'>
<extension class="GaudiTest.GaudiExeTest" kind="test">
  <argument name="program"><text>gaudirun.py</text></argument>
  <argument name="args"><set><text>-v</text><text>../../options/LoadDDDB.py</text><text>$DDDBROOT/options/LHCb-2008.py</text></set></argument>
<argument name="validator"><text>
linecount = 0
errors = {'ERROR':[],'FATAL':[]}
outlines = stdout.splitlines()
from math import log10
fmt = "%%%dd - %%s" % (int(log10(100))+1)
for l in outlines:
    linecount += 1
    words = l.split()
    if len(words) >= 2 and words[1] in errors:
        errors[words[1]].append(fmt%(linecount,l.rstrip()))

for e in errors:
    if errors[e]:
        causes.append('%s(%d)'%(e,len(errors[e])))
        result["GaudiTest.lines.%s"%e] = result.Quote('\n'.join(errors[e]))
</text></argument>
</extension>
