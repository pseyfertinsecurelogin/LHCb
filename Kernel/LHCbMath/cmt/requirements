#============================================================================
# Created    : 19/04/2006
# Maintainer : Juan Palacios
#============================================================================

package LHCbMath
version v3r8

#============================================================================
# Structure, i.e. directories to process. 
#============================================================================

branches cmt doc LHCbMath src dict python tests 

#============================================================================
# Used packages
#============================================================================
use GaudiKernel     v*
use ROOT            v*      LCG_Interfaces
use Boost           v*      LCG_Interfaces
use GSL             v*      LCG_Interfaces
use GaudiPython     v*                     -no_auto_imports

apply_pattern install_more_includes more=LHCbMath

apply_pattern install_python_modules

macro_append ROOT_linkopts " -lMathCore " \
             WIN32 " libMathCore.lib "
macro_append ROOT_linkopts "" \
             ROOT_GE_5_19&WIN32 " libGenVector.lib " \
             ROOT_GE_5_19 " -lGenVector "

# ================= constituents: linker library ============================
library                     LHCbMathLib    ../src/*.cpp
                        
application  TestPow -group=tests   ../tests/pow.cpp         -check
macro_append TestPow_dependencies    " LHCbMathLib "
application  TestBit -group=tests  ../tests/bit.cpp          -check
macro_append TestBit_dependencies    " LHCbMathLib "
application  TestDigit -group=tests ../tests/digit.cpp       -check
macro_append TestDigit_dependencies  " LHCbMathLib "
application  TestKine -group=tests ../tests/kinematics.cpp   -check
macro_append TestKine_dependencies   " LHCbMathLib "
application  TestLomont            ../tests/TestLomontCompare.cpp 
macro_append TestLomont_dependencies " LHCbMathLib "

# ================= patterns ================================================
apply_pattern       linker_library library=LHCbMathLib
#============================================================================
apply_pattern reflex_dictionary                               \
              dictionary=LHCbMath                                 \
              headerfiles=$(LHCBMATHROOT)/dict/LHCbMathDict.h         \
              selectionfile=$(LHCBMATHROOT)/dict/LHCbMathDict.xml     \
              options="-U__MINGW32__"
#============================================================================
macro LHCbMath_use_linkopts $(use_linkopts)
#============================================================================
private
# Note: libgslcblas is needed by libgsl, but the link is missing.
macro_prepend GSL_linkopts " -Wl,--no-as-needed " \
                    Darwin "" \
                     WIN32 ""
macro_append GSL_linkopts " -Wl,--as-needed " \
                    Darwin "" \
                     WIN32 ""
end_private
