<?xml version="1.0" ?><!DOCTYPE extension  PUBLIC '-//QM/2.3/Extension//EN'  'http://www.codesourcery.com/qm/dtds/2.3/-//qm/2.3/extension//en.dtd'>
<extension class="GaudiTest.GaudiExeTest" kind="test">
<argument name="program"><text>gaudirun.py</text></argument>
<argument name="args"><set>
<text>-v</text>
</set></argument>
<argument name="options"><text>
from Gaudi.Configuration import *
from Configurables import DetCondTest__TestConditionAlg as TestAlg
from Configurables import LHCbAlgsTests__TestTimeDecoderOdin as TimeDecoder
from Configurables import ( EventClockSvc, RunChangeHandlerSvc, XmlCnvSvc )

EventClockSvc().addTool(TimeDecoder,"EventTimeDecoder")

detDataSvc = DetectorDataSvc( UsePersistency = True,
                              DetDbRootName = "dd",
                              DetDbLocation = "../data/runchangehandler/lhcb.xml",
                              DetStorageType = 7 )
xmlCnvSvc = XmlCnvSvc(AllowGenericConversion = True)
DetectorPersistencySvc( CnvServices = [ xmlCnvSvc ] )

rch = RunChangeHandlerSvc()
rch.Conditions = {"Condition": "../%d/%d.xml"}

app = ApplicationMgr()
app.TopAlg = [ ]

ApplicationMgr().ExtSvc += [ detDataSvc, rch ]
app.EvtSel = "NONE"
app.EvtMax = 2

EventDataSvc(ForceLeaves = True)
#MessageSvc(OutputLevel = DEBUG)

</text></argument>
<argument name="exit_code"><integer>1</integer></argument>
<argument name="validator"><text>
findReferenceBlock('RunChangeHandle...  ERROR format string can have only 0 or 1 placeholders: "../%d/%d.xml"')
</text></argument>
</extension>
