<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE gdd SYSTEM "gdd.dtd">

<gdd>
  <package name='LHCbKernel'>
    <class name    = 'STChannelID' 
           author  = 'M Needham'
           desc    = 'Channel ID for class for ST'
           virtual = 'FALSE'                 >
      &StlVector;

      <enum
          desc   = "types of sub-detector channel ID"
          name   = "detType"
          value  = "typeTT = 0, typeIT = 1"
          access = 'PUBLIC'
       />

      <constructor argList='const unsigned int iType, const unsigned int iStation, 
                            const unsigned int iLayer, const unsigned int iDetRegion, 
                            const unsigned int iSector, const unsigned int iStrip' 
                   desc='constructor with station, layer, detRegion, sector , strip,'>
        <code>    

          m_channelID = (iType &lt;&lt; typeBits) +
                        (iStation &lt;&lt; stationBits) + 
                        (iLayer &lt;&lt; layerBits) + 
                        (iDetRegion &lt;&lt; detRegionBits) + 
                        (iSector &lt;&lt;  sectorBits) + 
                        (iStrip &lt;&lt; stripBits);
        </code>
      </constructor>
      <constructor argList='const STChannelID aChannelID' 
                   desc='copy constructor'>
        <code>
          m_channelID = aChannelID.m_channelID;
        </code>
      </constructor>
      <constructor argList='int id' 
                   initList = 'm_channelID(id)'
                   desc='constructor with int'>
        <code></code>
      </constructor>

      <method type='' name='operator int' const='TRUE'  desc='cast'>
        <code>return m_channelID;</code>
      </method>

      <method type='unsigned int' name='type' const='TRUE' desc='get the type'>
        <code>return (m_channelID &amp; typeMask) >> typeBits;</code>
      </method>

      <method type='bool' name='isTT' const='TRUE' desc='test whether TT or not'>
        <code>return (type() == LHCb::STChannelID::typeTT ? true : false);</code>
      </method>

      <method type='bool' name='isIT' const='TRUE' desc='test whether IT or not'>
        <code>return (type() == LHCb::STChannelID::typeIT ? true : false);</code>
      </method>

      <attribute type='bitfield' name='channelID' desc='OT Channel ID'>
        <bitfield name='strip' length='10'  desc='strip' setMeth='FALSE' />
        <bitfield name='sector' length='5'  desc='sector' setMeth='FALSE'/>
        <bitfield name='detRegion' length='3'  desc='detRegion' setMeth='FALSE'/>
        <bitfield name='layer' length='3'  desc='layer' setMeth='FALSE'/>
        <bitfield name='station' length='2' desc='station' setMeth='FALSE'/>
        <bitfield name='type' length='1' desc='type - TT or IT' getMeth='FALSE' setMeth='FALSE'/>
        <bitfield name='uniqueLayer' length='layer, station' 
                  desc='Unique layer' setMeth='FALSE'/>
        <bitfield name='uniqueDetRegion' length='detRegion, layer, station' 
                  desc='Unique detRegion' setMeth='FALSE'/>
        <bitfield name='uniqueSector' length='sector, detRegion, layer, station' 
                  desc='Unique layer' setMeth='FALSE'/>
      </attribute>
    </class>
  </package>
</gdd>
